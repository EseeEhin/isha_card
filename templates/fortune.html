<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†è¿åŠ¿</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .container { max-width: 1200px; }
        .card-header { font-weight: bold; }
        .tag-input { background-color: #e9ecef; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">ç®¡ç†è¿åŠ¿</h1>
        <div class="alert alert-info">
            <strong>è¯´æ˜:</strong> åœ¨è¿™é‡Œç®¡ç†è¿åŠ¿çš„æ ‡ç­¾æ± ã€åŸºç¡€ç­‰çº§å’Œæè¿°ç»„åˆã€‚ä¿®æ”¹åä¼šè‡ªåŠ¨ä¿å­˜ã€‚
        </div>

        <!-- ç®¡ç†æ ‡ç­¾æ±  -->
        <div class="card mb-5">
            <div class="card-header bg-warning text-dark">
                æ ‡ç­¾æ± ç®¡ç†
            </div>
            <div class="card-body">
                <form action="{{ url_for('fortune_web') }}" method="post">
                    <input type="hidden" name="form_type" value="tag_pools">
                    <div class="row">
                        <div class="col-md-4">
                            <h5>å‰è¿æ ‡ç­¾æ± </h5>
                            <textarea class="form-control" name="good_tags" rows="5">{{ fortune_data.tag_pools.good | join(', ') }}</textarea>
                        </div>
                        <div class="col-md-4">
                            <h5>ä¸­æ€§æ ‡ç­¾æ± </h5>
                            <textarea class="form-control" name="neutral_tags" rows="5">{{ fortune_data.tag_pools.neutral | join(', ') }}</textarea>
                        </div>
                        <div class="col-md-4">
                            <h5>å„è¿æ ‡ç­¾æ± </h5>
                            <textarea class="form-control" name="bad_tags" rows="5">{{ fortune_data.tag_pools.bad | join(', ') }}</textarea>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-warning mt-3">ä¿å­˜æ ‡ç­¾æ± å˜æ›´</button>
                </form>
            </div>
        </div>

        <!-- ç®¡ç†è¿åŠ¿ç­‰çº§ -->
        <div class="card mb-5">
            <div class="card-header bg-primary text-white">
                è¿åŠ¿ç­‰çº§ç®¡ç†
            </div>
            <div class="card-body">
                <form action="{{ url_for('fortune_web') }}" method="post">
                    <input type="hidden" name="form_type" value="levels">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ç­‰çº§åç§°</th>
                                <th>æ˜Ÿæ˜Ÿæ•° (1-7)</th>
                                <th>æ˜Ÿæ˜Ÿå½¢çŠ¶</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for level in fortune_data.levels %}
                            <tr>
                                <td>{{ level.id }}<input type="hidden" name="level_id_{{ loop.index0 }}" value="{{ level.id }}"></td>
                                <td><input type="text" class="form-control" name="level_name_{{ level.id }}" value="{{ level.level_name }}"></td>
                                <td><input type="number" class="form-control" name="stars_{{ level.id }}" value="{{ level.stars }}" min="1" max="7"></td>
                                <td>
                                    <select class="form-select" name="star_shape_{{ level.id }}">
                                        <option value="star" {% if level.star_shape == 'star' %}selected{% endif %}>æ˜Ÿæ˜Ÿ âœ¨</option>
                                        <option value="heart" {% if level.star_shape == 'heart' %}selected{% endif %}>çˆ±å¿ƒ â¤ï¸</option>
                                        <option value="coin" {% if level.star_shape == 'coin' %}selected{% endif %}>é‡‘å¸ ğŸ’°</option>
                                        <option value="thorn" {% if level.star_shape == 'thorn' %}selected{% endif %}>è†æ£˜ ğŸ¥€</option>
                                        <option value="skull" {% if level.star_shape == 'skull' %}selected{% endif %}>éª·é«… ğŸ’€</option>
                                    </select>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <button type="submit" class="btn btn-primary">ä¿å­˜ç­‰çº§å˜æ›´</button>
                </form>
            </div>
        </div>

        <!-- ç®¡ç†æè¿°ç»„åˆ -->
        <div class="card">
            <div class="card-header bg-success text-white">
                æè¿°ç»„åˆç®¡ç†
            </div>
            <div class="card-body">
                <form action="{{ url_for('fortune_web') }}" method="post">
                    <input type="hidden" name="form_type" value="descriptions">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>æ ‡ç­¾ç»„åˆ (é€—å·åˆ†éš”)</th>
                                <th>æè¿°æ–‡æœ¬</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for desc in fortune_data.descriptions %}
                            <tr>
                                <td>
                                    <input type="hidden" name="desc_id_{{ loop.index0 }}" value="{{ desc.id }}">
                                    <input type="text" class="form-control" name="tags_{{ desc.id }}" value="{{ desc.tags | join(', ') }}">
                                </td>
                                <td><textarea class="form-control" name="text_{{ desc.id }}" rows="2">{{ desc.text }}</textarea></td>
                                <td>
                                    <button type="submit" name="delete_desc" value="{{ desc.id }}" class="btn btn-danger btn-sm" onclick="return confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæè¿°ç»„åˆå—ï¼Ÿ')">åˆ é™¤</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <button type="submit" class="btn btn-success">ä¿å­˜æè¿°å˜æ›´</button>
                </form>
                <hr>
                <h5 class="mt-4">æ·»åŠ æ–°çš„æè¿°ç»„åˆ</h5>
                <form action="{{ url_for('fortune_web') }}" method="post" class="mt-3">
                    <input type="hidden" name="form_type" value="add_description">
                    <div class="row">
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="new_tags" placeholder="æ–°æ ‡ç­¾ç»„åˆ, é€—å·åˆ†éš”" required>
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control" name="new_text" placeholder="æ–°çš„æè¿°æ–‡æœ¬" required>
                        </div>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-info w-100">æ·»åŠ </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary">è¿”å›ä¸»é¡µ</a>
        </div>
    </div>
</body>
</html>
